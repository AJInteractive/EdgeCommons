// EdgeCommons v0.8.0 +++ Visit edgecommons.org for documentation, updates and examples +++ Copyright (c) 2013 by Simon Widjaja +++ Distributed under the terms of the MIT license (http://www.opensource.org/licenses/mit-license.html) +++ This notice shall be included in all copies or substantial portions of the Software.
// Input 0
(function(a){var b=function(){};b.VERSION="0.0.2";a.Modulog=b})(window);
(function(){var a=function(){};a.VERSION="0.0.2";a.LEVEL_NONE=0;a.LEVEL_ERROR=1;a.LEVEL_WARN=2;a.LEVEL_INFO=3;a.LEVEL_DEBUG=4;a.level=a.LEVEL_DEBUG;var b=null;a.addLogTarget=function(c){"function"===typeof c&&(b=c)};a.debug=function(c,e,a){ModulogLog.level>=ModulogLog.LEVEL_DEBUG&&(c="[ DEBUG "+(e?"| "+e+" ":"")+"] "+c,"undefined"!=typeof console&&"undefined"!=typeof console.debug?a?console.debug(c,a):console.debug(c):"undefined"!=typeof console&&"undefined"!=typeof console.info&&(a?console.info(c,
a):console.info(c)),ModulogLog.__delegate(c,a))};a.info=function(a,e,b){ModulogLog.level>=ModulogLog.LEVEL_INFO&&(a="[ INFO "+(e?"| "+e+" ":"")+"] "+a,"undefined"!=typeof console&&"undefined"!=typeof console.info&&(b?console.info(a,b):console.info(a)),ModulogLog.__delegate(a,b))};a.warn=function(a,e,b){ModulogLog.level>=ModulogLog.LEVEL_WARN&&(a="[ WARN "+(e?"| "+e+" ":"")+"] "+a,"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(b?console.warn(a,b):console.warn(a)),ModulogLog.__delegate(a,
b))};a.error=function(a,e,b){ModulogLog.level>=ModulogLog.LEVEL_ERROR&&(a="[ ERROR "+(e?"| "+e+" ":"")+"] "+a,"undefined"!=typeof console&&"undefined"!=typeof console.error&&(b?console.error(a,b):console.error(a)),ModulogLog.__delegate(a,b))};a.__delegate=function(a,e){b&&(e?b(a+" : "+e.toString()):b(a))};window.Log=window.MLog=window.ModulogLog=a})(window.Modulog);
(function(){var a=function(){};a.VERSION="0.0.1";var b=null,c=ModulogLog;a.get=function(a){for(var c=a.split("."),f=b,g=0;g<c.length;g++){var h=c[g];f.hasOwnProperty(h)||ModulogLog.warn("Config value not found: "+a,"CONFIG");f=f[h]}return f};a.set=function(a,c){for(var f=a.split("."),g=b,h=0;h<f.length-1;h++)g=g[f[h]];g[f.pop()]=c};a.init=function(a,d){"string"===typeof a&&jQuery?$.getJSON(a,function(a){b=a;"function"===typeof d&&d()}):"object"===typeof a?b=a:c.error("Could not init config. init() function expects config object or url to config.js. Latter needs jQuery to be initialized before.",
"Modulog | ModulogConfig")};window.Config=window.MConfig=window.ModulogConfig=a})(window.Modulog);
// Input 1
(function(a){var b=function(){console.log("Multiton")};b.VERSION="0.8.0";a.EC=a.EdgeCommons=b})(window);
// Input 2
(function(a){var b=function(){};b.VERSION="0.0.6";var c=ModulogLog,e=null,d=null;a.loadScript=function(a,e){c.debug("loadScript: "+a,"EdgeCommons | Core");try{yepnope({load:a,callback:function(b){b==a&&(c.debug("Loading external script was successful: "+a,"EdgeCommons | Core"),"function"===typeof e&&e())}})}catch(b){c.error("Loading external script failed: "+a,"EdgeCommons | Core")}};a.getInjectedData=function(a,e){try{e=e||"data";for((!a||!a.getParentSymbol)&&c.error("getInjectedData(): First argument 'sys' is not optional",
"EdgeCommons | Core");a.getParentSymbol();)a=a.getParentSymbol();var b=a.getSymbolElement().find("."+e).html();return $.parseJSON(b)}catch(d){c.error("Reading injected data failed (scriptClassSelector="+e+")","EdgeCommons | Core",d)}};a.setAdaptiveLayouts=function(b,d,h){!b||!b.length?c.error("Error in setAdaptiveLayouts(). Argument 'layouts' is not optional and has to be an array.","EdgeCommons | Core"):(e=b,d&&($(window).resize(function(){a.applyAdaptiveLayout(d,h)}),a.applyAdaptiveLayout(d,h)))};
a.applyAdaptiveLayout=function(a,b){try{a.setVariable("doResizing",function(){var h=a.getComposition().getStage().getSymbolElement().width(),j=a.$(b),i=null;$.each(e,function(a,b){h>=b-20&&(i=b)});d!=i&&(c.debug("Switching to: layout"+i,"EdgeCommons | Core"),d=i,j.html(""),a.createChildSymbol("layout"+i,b));a.$("currentLayout").html(a.getVariable("layout"))}),a.getVariable("doResizing")()}catch(h){console.error(h)}};a.centerStage=function(a){a?a.getComposition().getStage().getSymbolElement().css("margin",
"0px auto"):c.error("Error in centerStage(). Argument 'sym' is not optional.","EdgeCommons | Core")};a.loadComposition=function(b,e){if(!b||!e)c.error("Error in loadComposition(). Arguments 'src' and 'sym' are not optional.","EdgeCommons | Core");else{try{var d=e.getSymbolElement(),l="ec_"+Math.random().toString(36).substring(7);d.html('<iframe id="'+l+'" src="'+b+'" style="overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none;"></iframe>');var j=new jQuery.Deferred,i=jQuery("#"+
l),k=i[0].contentWindow;i.load(function(){k.AdobeEdge.bootstrapCallback(function(a){a=k.AdobeEdge.getComposition(a);j.resolve(a,k.AdobeEdge)})})}catch(m){a.error("Error in loadComposition: ","EdgeCommons | Core",m.toString())}return j}};a.Core=b;a.Log=c;a.debug=c.debug;a.info=c.info;a.warn=c.warn;a.error=c.error;a.Config=MConfig})(EdgeCommons);
// Input 3
(function(a){var b=function(){};b.VERSION="0.0.1";b.preloader=null;var c=ModulogLog;b.setup=function(e){try{b.preloader?e():a.loadScript("http://code.createjs.com/preloadjs-0.1.0.min.js",function(){b.preloader=new PreloadJS;e()})}catch(d){c.error("Error in setup(): "+d.toString(),"EdgeCommons | Preload",d)}};a.Preload=b})(EdgeCommons);
// Input 4
(function(a){var b=function(){};b.VERSION="0.0.2";b.soundManifest=null;var c=ModulogLog;b.setup=function(e,d){try{if(e){this.soundManifest=e;var f=function(){a.Preload.preloader.installPlugin(SoundJS);a.Preload.preloader.onFileLoad=function(){c.debug("onFileLoad","EdgeCommons | Sound")};a.Preload.preloader.onComplete=function(){c.debug("onComplete","EdgeCommons | Sound")};c.debug("Loading Sound Manifest","DEBUG",b.soundManifest);a.Preload.preloader.loadManifest(b.soundManifest,!0);d&&d()};a.Preload.preloader?
a.loadScript("http://code.createjs.com/soundjs-0.2.0.min.js",f):a.Preload.setup(function(){a.loadScript("http://code.createjs.com/soundjs-0.2.0.min.js",f)})}else c.error("Sound.setup() failed: manifest argument is not optional","EdgeCommons | Sound")}catch(g){c.error("Error in setup(): "+g.toString(),"EdgeCommons | Sound",g)}};b.play=function(a,b){if(SoundJS.checkPlugin(!0)){c.debug("Playing sound: "+a,"EdgeCommons | Sound");var f=SoundJS.play(a,SoundJS.INTERRUPT_NONE,0,0,!1,1);f&&(f.onComplete=b)}else c.error("Error in SoundJS (SoundJS.checkPlugin(true) failed)",
"EdgeCommons | Sound")};b.stop=function(a){SoundJS.checkPlugin(!0)?(c.debug("Stopping sound: "+a,"EdgeCommons | Sound"),SoundJS.stop(a)):c.error("Error in SoundJS (SoundJS.checkPlugin(true) failed)","EdgeCommons | Sound")};a.Sound=b})(EdgeCommons);
// Input 5
(function(a){var b=function(){};b.VERSION="0.0.1";b.compositions={};var c=ModulogLog;b.addComposition=function(a){this.compositions[a]={};var b=AdobeEdge.getComposition(a).getStage();this.compositions[a].stage=b;var c=AdobeEdge.getComposition(a).getStage().getSymbolElement();this.compositions[a].stageElement=c;var g=c.height();this.compositions[a].stageHeight=g;c=c.position().top;this.compositions[a].stageTop=c;this.compositions[a].stageMiddle=Math.floor(c+g/2);this.compositions[a].duration=b.getDuration();
b.stop(0)};b.setup=function(b){b?(this.addComposition(b.getComposition().compId),$(document).scroll(function(){var b=$(document).scrollTop();$.each(a.Parallax.compositions,function(a,c){var e=b/(c.stageHeight-$(window).height());c.stage.stop(Math.floor(e*c.duration))})})):c.error("Error in setup(). Argument 'sym' is not optional.","EdgeCommons | Parallax")};a.Parallax=b})(EdgeCommons);
// Input 6
(function(a){var b=function(){};b.VERSION="0.0.1";b.compositions={};var c=ModulogLog;b.open=function(b){if("youtube"!=b.type)c.error("Error in open(). Spotlight only supports type 'youtube' in this version","EdgeCommons | Spotlight");else{b.width=b.width||400;b.height=b.height||600;b.borderWidth=b.borderWidth||5;b.borderColor=b.borderColor||"#FFF";$("body").append('<div id="spotlight"> <div class="background"> </div> </div>');$("#spotlight .background").append('<div class="base"></div>');$("#spotlight .background").append('<div class="close-button"></div>');
$("#spotlight .close-button").css("margin-left",0.5*b.width-15+b.borderWidth).css("margin-top",-0.5*b.height-15);var d=$("#spotlight .base");d.css("width",0).css("height",0).css("margin-left",0).css("margin-top",0).css("border-width",b.borderWidth).css("border-color",b.borderColor).css("border-radius",5);d.animate({width:b.width,"margin-left":-0.5*b.width,height:b.height,"margin-top":-0.5*b.height},400,"easeOutBack",function(){$("#spotlight .content").css("display","inline");$("#spotlight .fader").fadeOut(2E3);
$("#spotlight .close-button").fadeIn()});d.append('<div class="content"></div>');d=$("#spotlight .content");d.append('<iframe width="'+b.width+'" height="'+b.height+'" src="http://www.youtube.com/embed/'+b.param.media+"?autoplay="+(b.param&&b.param.autoplay?"1":"0")+'" frameborder="0" allowfullscreen></iframe>');d.append('<div class="fader"></div>');$("#spotlight .fader");$("#spotlight .background").click(function(){a.Spotlight.close(b)})}};b.close=function(){$("#spotlight .content").remove();$("#spotlight .close-button").remove();
$("#spotlight .background").fadeOut(400);$("#spotlight .base").animate({width:0,"margin-left":0,height:0,"margin-top":0,opacity:0},400,"easeOutCubic",function(){$("#spotlight").remove()})};a.Spotlight=b})(EdgeCommons);
// Input 7
(function(a){a.getSymbolName=function(a){var c=a.getVariable("symbolSelector");(a=a.getParentSymbol())&&(c=c.replace(a.getVariable("symbolSelector")+"_",""));return c=c.replace("#","")};a.SpeedControl={};a.SpeedControl.setSpeed=function(b,c){$.each(c.timelines["Default Timeline"].timeline,function(e,d){"undefined"==typeof d.ec&&(d.ec={});"undefined"==typeof d.ec.oldPosition&&(d.ec.originalPosition=d.position,d.ec.originalDuration=d.duration);d.position=1/b*d.ec.originalPosition;d.duration=1/b*d.ec.originalDuration;
c._flushCache();a.debug("setSpeed: factor:","EdgeCommons | Experimental",1/b)})}})(EdgeCommons);
