// EdgeCommons v0.8.0 +++ Visit edgecommons.org for documentation, updates and examples +++ Copyright (c) 2013 by Simon Widjaja +++ Distributed under the terms of the MIT license (http://www.opensource.org/licenses/mit-license.html) +++ This notice shall be included in all copies or substantial portions of the Software.
// Input 0
(function(a){var e=function(){};e.VERSION="0.0.2";a.Modulog=e})(window);
(function(){var a=function(){};a.VERSION="0.0.2";a.LEVEL_NONE=0;a.LEVEL_ERROR=1;a.LEVEL_WARN=2;a.LEVEL_INFO=3;a.LEVEL_DEBUG=4;a.level=a.LEVEL_DEBUG;var e=null;a.addLogTarget=function(c){"function"===typeof c&&(e=c)};a.debug=function(c,b,d){ModulogLog.level>=ModulogLog.LEVEL_DEBUG&&(c="[ DEBUG "+(b?"| "+b+" ":"")+"] "+c,"undefined"!=typeof console&&"undefined"!=typeof console.debug?d?console.debug(c,d):console.debug(c):"undefined"!=typeof console&&"undefined"!=typeof console.info&&(d?console.info(c,
d):console.info(c)),ModulogLog.__delegate(c,d))};a.info=function(c,b,d){ModulogLog.level>=ModulogLog.LEVEL_INFO&&(c="[ INFO "+(b?"| "+b+" ":"")+"] "+c,"undefined"!=typeof console&&"undefined"!=typeof console.info&&(d?console.info(c,d):console.info(c)),ModulogLog.__delegate(c,d))};a.warn=function(c,b,d){ModulogLog.level>=ModulogLog.LEVEL_WARN&&(c="[ WARN "+(b?"| "+b+" ":"")+"] "+c,"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(d?console.warn(c,d):console.warn(c)),ModulogLog.__delegate(c,
d))};a.error=function(c,b,d){ModulogLog.level>=ModulogLog.LEVEL_ERROR&&(c="[ ERROR "+(b?"| "+b+" ":"")+"] "+c,"undefined"!=typeof console&&"undefined"!=typeof console.error&&(d?console.error(c,d):console.error(c)),ModulogLog.__delegate(c,d))};a.__delegate=function(c,b){e&&(b?e(c+" : "+b.toString()):e(c))};window.Log=window.MLog=window.ModulogLog=a})(window.Modulog);
(function(){var a=function(){};a.VERSION="0.0.1";var e=null,c=ModulogLog;a.get=function(b){for(var d=b.split("."),c=e,a=0;a<d.length;a++){var f=d[a];c.hasOwnProperty(f)||ModulogLog.warn("Config value not found: "+b,"CONFIG");c=c[f]}return c};a.set=function(b,c){for(var a=b.split("."),g=e,f=0;f<a.length-1;f++)g=g[a[f]];g[a.pop()]=c};a.init=function(b,d){"string"===typeof b&&jQuery?$.getJSON(b,function(c){e=c;"function"===typeof d&&d()}):"object"===typeof b?e=b:c.error("Could not init config. init() function expects config object or url to config.js. Latter needs jQuery to be initialized before.",
"Modulog | ModulogConfig")};window.Config=window.MConfig=window.ModulogConfig=a})(window.Modulog);
// Input 1
(function(a){var e=function(){};e.VERSION="0.8.0";a.EC=a.EdgeCommons=e})(window);
// Input 2
(function(a){var e=function(){};e.VERSION="0.0.6";var c=ModulogLog,b=null,d=null;a.loadScript=function(b,d){c.debug("loadScript: "+b,"EdgeCommons | Core");try{yepnope({load:b,callback:function(a){a==b&&(c.debug("Loading external script was successful: "+b,"EdgeCommons | Core"),"function"===typeof d&&d())}})}catch(a){c.error("Loading external script failed: "+b,"EdgeCommons | Core")}};a.getInjectedData=function(b,d){try{d=d||"data";for((!b||!b.getParentSymbol)&&c.error("getInjectedData(): First argument 'sys' is not optional",
"EdgeCommons | Core");b.getParentSymbol();)b=b.getParentSymbol();var a=b.getSymbolElement().find("."+d).html();return $.parseJSON(a)}catch(e){c.error("Reading injected data failed (scriptClassSelector="+d+")","EdgeCommons | Core",e)}};a.setAdaptiveLayouts=function(d,e,f){!d||!d.length?c.error("Error in setAdaptiveLayouts(). Argument 'layouts' is not optional and has to be an array.","EdgeCommons | Core"):(b=d,e&&($(window).resize(function(){a.applyAdaptiveLayout(e,f)}),a.applyAdaptiveLayout(e,f)))};
a.applyAdaptiveLayout=function(a,e){try{a.setVariable("doResizing",function(){var f=a.getComposition().getStage().getSymbolElement().width(),j=a.$(e),h=null;$.each(b,function(b,d){f>=d-20&&(h=d)});d!=h&&(c.debug("Switching to: layout"+h,"EdgeCommons | Core"),d=h,j.html(""),a.createChildSymbol("layout"+h,e));a.$("currentLayout").html(a.getVariable("layout"))}),a.getVariable("doResizing")()}catch(f){console.error(f)}};a.centerStage=function(b){b?b.getComposition().getStage().getSymbolElement().css("margin",
"0px auto"):c.error("Error in centerStage(). Argument 'sym' is not optional.","EdgeCommons | Core")};a.loadComposition=function(b,d){if(!b||!d)c.error("Error in loadComposition(). Arguments 'src' and 'sym' are not optional.","EdgeCommons | Core");else{try{var e=d.getSymbolElement(),l="ec_"+Math.random().toString(36).substring(7);e.html('<iframe id="'+l+'" src="'+b+'" style="overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none;"></iframe>');var j=new jQuery.Deferred,h=jQuery("#"+
l),k=h[0].contentWindow;h.load(function(){k.AdobeEdge.bootstrapCallback(function(b){b=k.AdobeEdge.getComposition(b);j.resolve(b,k.AdobeEdge)})})}catch(m){a.error("Error in loadComposition: ","EdgeCommons | Core",m.toString())}return j}};a.Core=e;a.Log=c;a.debug=c.debug;a.info=c.info;a.warn=c.warn;a.error=c.error;a.Config=MConfig})(EdgeCommons);
// Input 3
(function(a){var e=function(){};e.VERSION="0.0.1";e.preloader=null;var c=ModulogLog;e.setup=function(b){try{e.preloader?b():a.loadScript("http://code.createjs.com/preloadjs-0.1.0.min.js",function(){e.preloader=new PreloadJS;b()})}catch(d){c.error("Error in setup(): "+d.toString(),"EdgeCommons | Preload",d)}};a.Preload=e})(EdgeCommons);
// Input 4
(function(a){var e=function(){};e.VERSION="0.0.2";e.soundManifest=null;var c=ModulogLog;e.setup=function(b,d){try{if(b){this.soundManifest=b;var i=function(){a.Preload.preloader.installPlugin(SoundJS);a.Preload.preloader.onFileLoad=function(){c.debug("onFileLoad","EdgeCommons | Sound")};a.Preload.preloader.onComplete=function(){c.debug("onComplete","EdgeCommons | Sound")};c.debug("Loading Sound Manifest","DEBUG",e.soundManifest);a.Preload.preloader.loadManifest(e.soundManifest,!0);d&&d()};a.Preload.preloader?
a.loadScript("http://code.createjs.com/soundjs-0.2.0.min.js",i):a.Preload.setup(function(){a.loadScript("http://code.createjs.com/soundjs-0.2.0.min.js",i)})}else c.error("Sound.setup() failed: manifest argument is not optional","EdgeCommons | Sound")}catch(g){c.error("Error in setup(): "+g.toString(),"EdgeCommons | Sound",g)}};e.play=function(b,d){if(SoundJS.checkPlugin(!0)){c.debug("Playing sound: "+b,"EdgeCommons | Sound");var a=SoundJS.play(b,SoundJS.INTERRUPT_NONE,0,0,!1,1);a&&(a.onComplete=d)}else c.error("Error in SoundJS (SoundJS.checkPlugin(true) failed)",
"EdgeCommons | Sound")};e.stop=function(b){SoundJS.checkPlugin(!0)?(c.debug("Stopping sound: "+b,"EdgeCommons | Sound"),SoundJS.stop(b)):c.error("Error in SoundJS (SoundJS.checkPlugin(true) failed)","EdgeCommons | Sound")};a.Sound=e})(EdgeCommons);
// Input 5
(function(a){var e=function(){};e.VERSION="0.0.1";e.compositions={};var c=ModulogLog;e.addComposition=function(b){this.compositions[b]={};var d=AdobeEdge.getComposition(b).getStage();this.compositions[b].stage=d;var a=AdobeEdge.getComposition(b).getStage().getSymbolElement();this.compositions[b].stageElement=a;var c=a.height();this.compositions[b].stageHeight=c;a=a.position().top;this.compositions[b].stageTop=a;this.compositions[b].stageMiddle=Math.floor(a+c/2);this.compositions[b].duration=d.getDuration();
d.stop(0)};e.setup=function(b){b?(this.addComposition(b.getComposition().compId),$(document).scroll(function(){var b=$(document).scrollTop();$.each(a.Parallax.compositions,function(a,c){var e=b/(c.stageHeight-$(window).height());c.stage.stop(Math.floor(e*c.duration))})})):c.error("Error in setup(). Argument 'sym' is not optional.","EdgeCommons | Parallax")};a.Parallax=e})(EdgeCommons);
// Input 6
(function(a){var e=function(){};e.VERSION="0.0.1";e.compositions={};var c=ModulogLog;e.open=function(b,d){try{if("youtube"!=b.type)c.error("Error in open(). Spotlight only supports type 'youtube' in this version","EdgeCommons | Spotlight");else{void 0==d&&(d=window.top.document);b.width=b.width||400;b.height=b.height||600;b.borderWidth=b.borderWidth||5;b.borderColor=b.borderColor||"#FFF";$("body",d).append('<div id="spotlight"> <div class="background"> </div> </div>');$("#spotlight .background",d).append('<div class="base"></div>');
$("#spotlight .background",d).append('<div class="close-button"></div>');$("#spotlight .close-button",d).css("margin-left",0.5*b.width-15+b.borderWidth).css("margin-top",-0.5*b.height-15);var e=$("#spotlight .base",d);e.css("width",0).css("height",0).css("margin-left",0).css("margin-top",0).css("border-width",b.borderWidth).css("border-color",b.borderColor).css("border-radius",5);e.animate({width:b.width,"margin-left":-0.5*b.width,height:b.height,"margin-top":-0.5*b.height},400,"easeOutBack",function(){$("#spotlight .content",
d).css("display","inline");$("#spotlight .fader",d).fadeOut(2E3);$("#spotlight .close-button",d).fadeIn()});e.append('<div class="content"></div>');var g=$("#spotlight .content",d);g.append('<iframe width="'+b.width+'" height="'+b.height+'" src="http://www.youtube.com/embed/'+b.param.media+"?autoplay="+(b.param&&b.param.autoplay?"1":"0")+'" frameborder="0" allowfullscreen></iframe>');g.append('<div class="fader"></div>');$("#spotlight .fader",d);$("#spotlight .background",d).click(function(){a.Spotlight.close(b,
d)});return!0}}catch(f){return c.error(f.toString()),!1}};e.close=function(b,a){void 0==a&&(a=window.top.document);$("#spotlight .content",a).remove();$("#spotlight .close-button",a).remove();$("#spotlight .background",a).fadeOut(400);$("#spotlight .base",a).animate({width:0,"margin-left":0,height:0,"margin-top":0,opacity:0},400,"easeOutCubic",function(){$("#spotlight",a).remove()})};a.Spotlight=e})(EdgeCommons);
// Input 7
(function(a){a.getSymbolName=function(a){var c=a.getVariable("symbolSelector");(a=a.getParentSymbol())&&(c=c.replace(a.getVariable("symbolSelector")+"_",""));return c=c.replace("#","")};a.accessSVG=function(a){if(a.is("div"))var c=a.css("background-image").replace("url(","").replace(")",""),c=c.replace('"',"");a.css("background-image","");var b="ec_"+Math.random().toString(36).substring(7);a.append('<embed id="'+b+'" src="'+c+'" type="image/svg+xml" />');var d=new jQuery.Deferred,i=document.getElementById(b);
i.onload=function(){var a=i.getSVGDocument();d.resolve(a,i,b)};return d};a.SpeedControl={};a.SpeedControl.setSpeed=function(e,c){$.each(c.timelines["Default Timeline"].timeline,function(b,d){"undefined"==typeof d.ec&&(d.ec={});"undefined"==typeof d.ec.oldPosition&&(d.ec.originalPosition=d.position,d.ec.originalDuration=d.duration);d.position=1/e*d.ec.originalPosition;d.duration=1/e*d.ec.originalDuration;c._flushCache();a.debug("setSpeed: factor:","EdgeCommons | Experimental",1/e)})}})(EdgeCommons);
